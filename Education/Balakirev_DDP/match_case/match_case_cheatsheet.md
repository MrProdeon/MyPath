# Конспект: Конструкция match / case в Python 3.10+

## Что это и зачем нужно?
`match / case` — это конструкция структурного сопоставления (pattern matching), введённая в Python 3.10. Она позволяет компактно и читаемо проверять переменные на соответствие различным шаблонам, как по значению, так и по структуре и типу данных.

Это альтернатива длинным цепочкам `if / elif / else`, особенно полезная при множественных вариантах условий, работе с разными типами данных и вложенными структурами.

---

## Общий синтаксис:
```python
match <переменная>:
    case <шаблон_1>:
        # блок кода
    case <шаблон_2>:
        # блок кода
    case _:
        # блок по умолчанию (аналог else)
```

## Примеры простых шаблонов:
```python
cmd = "top"

match cmd:
    case "top":
        print("вверх")
    case "left":
        print("влево")
    case "right":
        print("вправо")
    case _:
        print("другое")
```

- Сравнение переменной с константами (строками, числами и т.д.).
- Выполняется только первый совпавший case, затем выход.

## Несколько вариантов в одном case:
```python
match cmd:
    case "top" | "left" | "right":
        print("вверх, влево или вправо")
    case _:
        print("другое")
```

## Общий шаблон с переменной:
```python
match cmd:
    case command:
        print(f"команда: {command}")
```
- Такой шаблон всегда срабатывает. Его лучше ставить последним.
- Создаёт новую переменную `command`, равную значению переменной `cmd`.

## Проверка типа данных (шаблон с типом):
```python
match cmd:
    case str() as command:
        print(f"строковая команда: {command}")
    case int() as command:
        print(f"целочисленная команда: {command}")
    case bool() as command:
        print(f"булева команда: {command}")
    case _:
        print("другое")
```
- Используется `тип()` — проверка типа через шаблон.
- `as имя` — сохранить значение в переменную.
- Порядок важен! `bool` — это подкласс `int`, поэтому проверку `bool()` нужно писать раньше `int()`.

## Условие в шаблоне (guard):
```python
match cmd:
    case int() as command if 0 <= command <= 9:
        print("целочисленная команда от 0 до 9")
    case _:
        print("другое")
```
- После шаблона можно использовать `if` для добавления условий.
- Такой `if` называется **guard** (страж/защитник).

## Пример со строками и guard:
```python
match cmd:
    case str() as command if len(command) < 10 and command[0] == 'c':
        print(f"команда начинается с 'c': {command}")
    case _:
        print("другое")
```

## Объединение шаблонов типов:
```python
match cmd:
    case int() | float() as command if 0 <= command <= 9:
        print("число от 0 до 9")
    case _:
        print("не число")
```

---

## Заключение:
- `match / case` — мощная альтернатива `if / elif / else`, особенно при множественных сравнениях.
- Работает на принципах структурного сопоставления (pattern matching).
- Поддерживает сравнение значений, проверку типов, объединение шаблонов, условия (`guard`) и wildcard (`_`).

> Требуется Python 3.10 и выше.

